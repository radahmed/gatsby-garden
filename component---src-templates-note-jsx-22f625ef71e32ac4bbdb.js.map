{"version":3,"sources":["webpack:///./src/templates/note.jsx"],"names":["makeSlug","require","moment","Note","pageContext","post","data","markdownRemark","graphData","nodes","id","fields","title","color","links","focusedNodeId","i","referredBy","length","refNoteTitle","push","source","target","refersTo","fontColor","className","dangerouslySetInnerHTML","__html","html","Date","date","format","frontmatter","tags","map","tag","index","key","to","config","automaticRearrangeAfterDropNode","directed","initialZoom","node","size","fontSize","onClickNode","nodeId","slug","navigate"],"mappings":"4FAAA,4GAMMA,GANN,oBAMiBC,EAAQ,SACnBC,EAASD,EAAQ,QAER,SAASE,EAAT,GAWb,IAXmD,IAAtBC,EAAqB,EAArBA,YACvBC,EAD4C,EAARC,KACxBC,eAGZC,EAAY,CAChBC,MAAO,CAAC,CAAEC,GAAIL,EAAKM,OAAOC,MAAOC,MAAO,UACxCC,MAAO,GACPC,cAAeV,EAAKM,OAAOC,OAIpBI,EAAI,EAAGA,EAAIZ,EAAYa,WAAWC,OAAQF,IAAK,CACtD,IAAMG,EAAef,EAAYa,WAAWD,GAC5CR,EAAUC,MAAMW,KAAK,CAAEV,GAAIS,IAC3BX,EAAUM,MAAMM,KAAK,CAAEC,OAAQF,EAAcG,OAAQjB,EAAKM,OAAOC,QAInE,IAAK,IAAII,EAAI,EAAGA,EAAIZ,EAAYmB,SAASL,OAAQF,IAAK,CACpD,IAAMG,EAAef,EAAYmB,SAASP,GAC1CR,EAAUC,MAAMW,KAAK,CAAEV,GAAIS,IAC3BX,EAAUM,MAAMM,KAAK,CAAEC,OAAQhB,EAAKM,OAAOC,MAAOU,OAAQH,IAI7B,IAA3BX,EAAUC,MAAMS,SAClBV,EAAUC,MAAMW,KAAK,CAAEV,GAAI,WAAYG,MAAO,OAAQW,UAAW,SACjEhB,EAAUM,MAAMM,KAAK,CACnBC,OAAQhB,EAAKM,OAAOC,MACpBU,OAAQ,WACRT,MAAO,UAuBX,OACE,kBAAC,IAAD,CAAQD,MAAOP,EAAKM,OAAOC,OACzB,yBAAKa,UAAU,aACb,wBAAIA,UAAU,cAAcpB,EAAKM,OAAOC,OACxC,yBACEa,UAAU,eACVC,wBAAyB,CAAEC,OAAQtB,EAAKuB,QAG1C,yBAAKH,UAAU,aACb,2CACgB,IACbvB,EAAO,IAAI2B,KAAKxB,EAAKM,OAAOmB,OAAOC,OAAO,mBAI9C1B,EAAK2B,YAAYC,KAChB,yBAAKR,UAAU,aACb,6CACA,4BACGpB,EAAK2B,YAAYC,KAAKC,KAAI,SAACC,EAAKC,GAAN,OACzB,wBAAIC,IAAKD,GACP,kBAAC,IAAD,CAAME,GAAE,SAAWtC,EAASmC,IAASA,SAK3C,KAEH/B,EAAYa,WAAWC,OACtB,yBAAKO,UAAU,mBACb,2CACA,4BACGrB,EAAYa,WAAWiB,KAAI,SAACtB,EAAOwB,GAAR,OAC1B,wBAAIC,IAAKD,GACP,kBAAC,IAAD,CAAME,GAAE,IAAMtC,EAASY,IAAWA,SAKxC,KAEJ,yBAAKa,UAAU,cACb,kBAAC,QAAD,CACEf,GAAG,kBACHJ,KAAME,EACN+B,OA1DU,CAClBC,iCAAiC,EACjCC,UAAU,EACVC,YAAa,IAEbC,KAAM,CACJ9B,MAAO,OACP+B,KAAM,IACNC,SAAU,KAmDJC,YAlEU,SAAUC,GAC5B,GAAe,aAAXA,EAAJ,CACA,IAAMC,EAAOhD,EAAS+C,GACtBE,YAAS,IAAID","file":"component---src-templates-note-jsx-22f625ef71e32ac4bbdb.js","sourcesContent":["import React from \"react\"\r\nimport { graphql, Link, navigate } from \"gatsby\"\r\nimport { Graph } from \"react-d3-graph\"\r\nimport Layout from \"../layout/layout\"\r\nimport \"../styles/note.css\"\r\nimport \"../styles/graph.css\"\r\nconst makeSlug = require(\"../utils/make-slug\")\r\nconst moment = require(\"moment\")\r\n\r\nexport default function Note({ pageContext, data }) {\r\n  const post = data.markdownRemark\r\n\r\n  // Create the data for the graph visualisation for the note linking.\r\n  const graphData = {\r\n    nodes: [{ id: post.fields.title, color: \"black\" }],\r\n    links: [],\r\n    focusedNodeId: post.fields.title,\r\n  }\r\n\r\n  // Links to the current Note\r\n  for (let i = 0; i < pageContext.referredBy.length; i++) {\r\n    const refNoteTitle = pageContext.referredBy[i]\r\n    graphData.nodes.push({ id: refNoteTitle })\r\n    graphData.links.push({ source: refNoteTitle, target: post.fields.title })\r\n  }\r\n\r\n  // Links from the current Note\r\n  for (let i = 0; i < pageContext.refersTo.length; i++) {\r\n    const refNoteTitle = pageContext.refersTo[i]\r\n    graphData.nodes.push({ id: refNoteTitle })\r\n    graphData.links.push({ source: post.fields.title, target: refNoteTitle })\r\n  }\r\n\r\n  // If this is an orphan note(no links to and from other notes), we need some hackery to get it to work.\r\n  if (graphData.nodes.length === 1) {\r\n    graphData.nodes.push({ id: \"No Links\", color: \"#eee\", fontColor: \"#999\" })\r\n    graphData.links.push({\r\n      source: post.fields.title,\r\n      target: \"No Links\",\r\n      color: \"#eee\",\r\n    })\r\n  }\r\n\r\n  const onClickNode = function (nodeId) {\r\n    if (nodeId === \"Unlinked\") return\r\n    const slug = makeSlug(nodeId)\r\n    navigate(`/${slug}`)\r\n  }\r\n\r\n  // the graph configuration, just override the ones you need\r\n  const graphConfig = {\r\n    automaticRearrangeAfterDropNode: true,\r\n    directed: true,\r\n    initialZoom: 1.4,\r\n    // nodeHighlightBehavior: true,\r\n    node: {\r\n      color: \"gray\",\r\n      size: 120,\r\n      fontSize: 10,\r\n    },\r\n  }\r\n\r\n  return (\r\n    <Layout title={post.fields.title}>\r\n      <div className=\"note-area\">\r\n        <h1 className=\"note-title\">{post.fields.title}</h1>\r\n        <div\r\n          className=\"note-content\"\r\n          dangerouslySetInnerHTML={{ __html: post.html }}\r\n        ></div>\r\n\r\n        <div className=\"note-meta\">\r\n          <p>\r\n            Published on:{\" \"}\r\n            {moment(new Date(post.fields.date)).format(\"MMMM Do, YYYY\")}\r\n          </p>\r\n        </div>\r\n\r\n        {post.frontmatter.tags ? (\r\n          <div className=\"note-tags\">\r\n            <h6>Tagged With: </h6>\r\n            <ul>\r\n              {post.frontmatter.tags.map((tag, index) => (\r\n                <li key={index}>\r\n                  <Link to={`/tags/${makeSlug(tag)}`}>{tag}</Link>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        ) : null}\r\n\r\n        {pageContext.referredBy.length ? (\r\n          <div className=\"note-references\">\r\n            <h6>Referred By</h6>\r\n            <ul>\r\n              {pageContext.referredBy.map((title, index) => (\r\n                <li key={index}>\r\n                  <Link to={`/${makeSlug(title)}`}>{title}</Link>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        ) : null}\r\n\r\n        <div className=\"note-graph\">\r\n          <Graph\r\n            id=\"note-link-graph\"\r\n            data={graphData}\r\n            config={graphConfig}\r\n            onClickNode={onClickNode}\r\n          />\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  )\r\n}\r\n\r\nexport const query = graphql`\r\n  query($slug: String!) {\r\n    markdownRemark(fields: { slug: { eq: $slug } }) {\r\n      html\r\n      fields {\r\n        title\r\n        date\r\n      }\r\n      frontmatter {\r\n        tags\r\n      }\r\n    }\r\n  }\r\n`\r\n"],"sourceRoot":""}